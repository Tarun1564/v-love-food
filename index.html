<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>V Love Food Online Store</title>
  
  <!-- Bootstrap 5 CSS CDN -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" xintegrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  
  <!-- Custom Font (Inter) -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    /* Custom styles for Bootstrap integration */
    body {
      font-family: 'Inter', sans-serif;
      background-color: #f3f4f6; /* Equivalent to bg-gray-100 */
      color: #343a40;
    }
    
    .product-card {
      /* Custom hover effect */
      transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
      border-radius: 1rem;
      overflow: hidden;
    }
    .product-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1), 0 4px 6px rgba(0, 0, 0, 0.05) !important;
    }
    .product-image {
      width: 100%;
      height: 200px; /* Fixed height for consistent grid look */
      object-fit: cover; /* Ensures image covers the area */
    }

    /* Custom button colors */
    .price-option-button {
      transition: background-color 0.3s ease, color 0.3s ease;
      border: 1px solid #ced4da;
      color: #6c757d;
      background-color: #fff;
      font-size: 0.75rem; /* text-xs */
      padding: 0.25rem 0.75rem; /* py-1 px-3 */
    }
    .price-option-button.active {
      background-color: #4f46e5; /* Indigo */
      color: #fff;
      border-color: #4f46e5;
    }

    /* Manual Modal setup to avoid complex Bootstrap JS initialization in a single file */
    .modal-backdrop-custom {
      position: fixed;
      top: 0;
      left: 0;
      z-index: 1040;
      width: 100vw;
      height: 100vh;
      background-color: #000;
      opacity: 0.5;
    }
  </style>
</head>
<body class="bg-light">

  <!-- Header -->
  <header class="bg-white shadow-sm py-4 mb-5">
    <div class="container d-flex flex-column flex-sm-row justify-content-between align-items-center">
      <div class="d-flex align-items-center mb-3 mb-sm-0">
        <h1 class="h3 fw-bold text-dark mb-0">V Love Food</h1>
      </div>
      <div class="d-flex align-items-center">
        <p class="lead fw-medium text-secondary mb-0">Call/WhatsApp: 9346445057</p>
      </div>
    </div>
  </header>

  <!-- Main Content: Product Grid -->
  <main class="container py-4">
    <h2 class="text-center mb-5 fw-light text-muted">Authentic Indian Pickles, Sweets, and Powders</h2>
    <div id="products-grid" class="row row-cols-1 row-cols-sm-2 row-cols-lg-3 g-4">
      <!-- Product Cards will be injected here by JavaScript -->
    </div>

    <!-- Purchase Modal (Manually controlled for simplicity) -->
    <div id="purchase-modal" class="modal d-none" tabindex="-1" role="dialog" aria-hidden="true" style="display: none;">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content rounded-4 shadow-lg border-0">
          <div class="modal-header border-bottom-0">
            <h5 class="modal-title fw-bold text-dark mx-auto">Place Your Order</h5>
          </div>
          <div class="modal-body">
            <form class="d-grid gap-3">
              <input type="text" id="modal-name" class="form-control form-control-lg rounded-3" placeholder="Your Name" required>
              <input type="tel" id="modal-phone" class="form-control form-control-lg rounded-3" placeholder="Phone Number (10 digits)" required>
              <textarea id="modal-address" class="form-control rounded-3" placeholder="Shipping Address" rows="3" required></textarea>
            </form>
            <p class="text-muted small mt-3 fst-italic">Order will be placed via WhatsApp. Please ensure you have it installed.</p>
          </div>
          <div class="modal-footer d-block border-top-0">
            <button id="confirm-purchase-btn" type="button" class="btn btn-success btn-lg w-100 mb-2 rounded-3 shadow-sm">
              Proceed to WhatsApp
            </button>
            <button id="close-modal-btn" type="button" class="btn btn-secondary btn-lg w-100 rounded-3">
              Cancel
            </button>
          </div>
        </div>
      </div>
    </div>
    <!-- Custom Backdrop (Used instead of Bootstrap's JS) -->
    <div id="modal-backdrop-custom" class="modal-backdrop-custom d-none"></div>

  </main>

  <script>
    // Products data (unchanged)
    const products = [
      {
        category: "NON VEG PICKLES",
        items: [
          { name: "Chicken Pickle", imageUrl: "assets/2.jpg", options: [{ size: "250g", price: 250 }, { size: "500g", price: 500 }, { size: "1000g", price: 1000 }] },
          { name: "Spiced Chicken Relish Pickle", imageUrl: "assets/7.jpg", options: [{ size: "250g", price: 250 }, { size: "500g", price: 500 }, { size: "1000g", price: 1000 }] },
          { name: "Prawn Pickle", imageUrl: "assets/14.jpg", options: [{ size: "250g", price: 500 }, { size: "500g", price: 1000 }, { size: "1000g", price: 2000 }] }
        ]
      },
      {
        category: "VEG PICKLES",
        items: [
          { name: "Tomato Pickle", imageUrl: "assets/12.jpg", options: [{ size: "250g", price: 150 }, { size: "500g", price: 300 }, { size: "1000g", price: 600 }] },
          { name: "Sorrel Leaves Pickle", imageUrl: "assets/13.jpg", options: [{ size: "250g", price: 150 }, { size: "500g", price: 300 }, { size: "1000g", price: 600 }] }
        ]
      },
      {
        category: "SWEETS",
        items: [
          { name: "Peanut Chikki", imageUrl: "assets/9.jpg", options: [{ size: "500g", price: 200 }, { size: "1kg", price: 400 }] },
          { name: "Dry Fruit Chikki", imageUrl: "assets/4.jpg", options: [{ size: "500g", price: 400 }, { size: "1kg", price: 800 }] },
          { name: "Cashew Chikki", imageUrl: "assets/5.jpg", options: [{ size: "500g", price: 400 }, { size: "1kg", price: 800 }] },
          { name: "URAD DAL LADDU", imageUrl: "assets/6.jpg", options: [{ size: "250g", price: 150 }, { size: "500g", price: 300 }, { size: "1000g", price: 600 }] },
          { name: "DRY FRUIT LADDU", imageUrl: "assets/10.jpg", options: [{ size: "250g", price: 450 }, { size: "500g", price: 900 }, { size: "1000g", price: 1800 }] }
        ]
      },
      {
        category: "VEG POWDERS",
        items: [
          { name: "Curry Leaves Powder", imageUrl: "assets/8.jpg", options: [{ size: "100g", price: 50 }, { size: "250g", price: 125 }, { size: "500g", price: 250 }] },
          { name: "Spiced Sesame Powder", imageUrl: "assets/11.jpg", options: [{ size: "100g", price: 70 }, { size: "250g", price: 175 }, { size: "500g", price: 350 }] },
          { name: "Spiced Lentil Powder", imageUrl: "assets/3.jpg", options: [{ size: "100g", price: 70 }, { size: "250g", price: 175 }, { size: "500g", price: 350 }] }
        ]
      }
    ];

    const productsGrid = document.getElementById('products-grid');
    const purchaseModal = document.getElementById('purchase-modal');
    const modalBackdrop = document.getElementById('modal-backdrop-custom');
    const confirmPurchaseBtn = document.getElementById('confirm-purchase-btn');
    const closeModalBtn = document.getElementById('close-modal-btn');
    const modalNameInput = document.getElementById('modal-name');
    const modalPhoneInput = document.getElementById('modal-phone');
    const modalAddressInput = document.getElementById('modal-address');

    // Create product card
    function createProductCard(product, item, index) {
      const uniqueId = `${item.name.replace(/\s/g, '-')}-${product.category.replace(/\s/g, '-')}-${index}`;
      
      // Create Bootstrap Column
      const col = document.createElement('div');
      col.className = 'col';

      // Create Bootstrap Card
      const card = document.createElement('div');
      card.className = 'card product-card bg-white h-100 shadow-sm border-0 d-flex flex-column';
      
      card.innerHTML = `
        <img src="${item.imageUrl}" class="card-img-top product-image" alt="${item.name}">
        <div class="card-body d-flex flex-column">
          <h3 class="h5 card-title fw-semibold text-dark">${item.name}</h3>
          <p class="card-text text-muted small mb-3">${product.category}</p>
          <div class="d-flex flex-wrap gap-2 mb-3 mt-auto" id="options-${uniqueId}"></div>
          <div class="mt-auto d-flex align-items-center justify-content-between pt-3 border-top">
            <p class="h4 fw-bold text-primary mb-0" id="price-${uniqueId}">₹${item.options[0].price}</p>
            <button class="purchase-button btn btn-dark btn-sm rounded-pill shadow-sm fw-medium px-4">
              Buy Now
            </button>
          </div>
        </div>
      `;

      const optionsContainer = card.querySelector(`#options-${uniqueId}`);
      const priceDisplay = card.querySelector(`#price-${uniqueId}`);
      const buyButton = card.querySelector('.purchase-button');

      // Add options
      item.options.forEach((option, i) => {
        const optionButton = document.createElement('button');
        optionButton.type = 'button';
        optionButton.className = 'price-option-button btn rounded-pill';
        
        if (i === 0) {
            optionButton.classList.add('active');
        }
        
        optionButton.textContent = `${option.size} - ₹${option.price}`;
        optionButton.setAttribute('data-size', option.size);
        optionButton.setAttribute('data-price', option.price);

        optionButton.addEventListener('click', () => {
          card.querySelectorAll('.price-option-button').forEach(btn => btn.classList.remove('active'));
          optionButton.classList.add('active');
          priceDisplay.textContent = `₹${option.price}`;
        });
        optionsContainer.appendChild(optionButton);
      });

      // Buy button
      buyButton.addEventListener('click', () => {
        const activeOptionBtn = card.querySelector('.price-option-button.active');
        const selectedOption = {
          size: activeOptionBtn.getAttribute('data-size'),
          price: activeOptionBtn.getAttribute('data-price')
        };
        showPurchaseModal(item.name, selectedOption);
      });

      col.appendChild(card);
      return col;
    }

    // Show modal (using manual class toggling to avoid Bootstrap JS dependency)
    function showPurchaseModal(productName, selectedOption) {
      purchaseModal.classList.remove('d-none');
      purchaseModal.style.display = 'block';
      modalBackdrop.classList.remove('d-none');

      modalNameInput.value = '';
      modalPhoneInput.value = '';
      modalAddressInput.value = '';

      confirmPurchaseBtn.onclick = () => {
        const name = modalNameInput.value.trim();
        const phone = modalPhoneInput.value.trim();
        const address = modalAddressInput.value.trim();

        // Custom Message Box for alert/confirm (due to sandbox restrictions)
        const showMessageBox = (message) => {
            const tempModal = document.createElement('div');
            tempModal.className = 'modal-alert-custom fixed-top w-100 p-3';
            tempModal.innerHTML = `
                <div class="alert alert-danger alert-dismissible fade show mb-0" role="alert">
                    <strong>Error:</strong> ${message}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            `;
            document.body.appendChild(tempModal);
            setTimeout(() => tempModal.remove(), 4000);
        };

        if (!name || !phone || !address) {
          showMessageBox('Please fill in all fields.');
          return;
        }
        if (!/^\d{10}$/.test(phone)) {
          showMessageBox('Enter a valid 10-digit phone number.');
          return;
        }

        const message = "Hello, I would like to order:"
                    + "\n\n*Product:* " + productName
                    + "\n*Quantity:* " + selectedOption.size
                    + "\n*Price:* ₹" + selectedOption.price
                    + "\n\n*Customer Details:*"
                    + "\nName: " + name
                    + "\nPhone: " + phone
                    + "\nAddress: " + address;

        const whatsappUrl = `https://wa.me/919346445057?text=${encodeURIComponent(message)}`;
        
        window.open(whatsappUrl, '_blank');
        closePurchaseModal();
      };
    }

    function closePurchaseModal() {
      purchaseModal.classList.add('d-none');
      purchaseModal.style.display = 'none';
      modalBackdrop.classList.add('d-none');

      modalNameInput.value = '';
      modalPhoneInput.value = '';
      modalAddressInput.value = '';
    }

    closeModalBtn.addEventListener('click', closePurchaseModal);
    modalBackdrop.addEventListener('click', closePurchaseModal); // Close on backdrop click

    // Render products
    products.forEach((category, i) => {
      category.items.forEach((item, j) => {
        const col = createProductCard(category, item, `${i}-${j}`);
        productsGrid.appendChild(col);
      });
    });
  </script>
</body>
</html>
